import { useState } from "react";
import { Link, useLocation } from "react-router-dom";
import { AlertTriangle, MessageCircle, MapPin, FileText, Shield, Info, Menu, X } from "lucide-react";

const navItems = [
  { to: "/", label: "Alerts", icon: AlertTriangle },
  { to: "/advisor", label: "AI Advisor", icon: MessageCircle },
  { to: "/safe-zones", label: "Safe Zones", icon: MapPin },
  { to: "/rescue", label: "Rescue Me", icon: FileText },
  { to: "/admin", label: "Admin", icon: Shield },
  { to: "/about", label: "About", icon: Info },
];

export default function Layout({ children }: { children: React.ReactNode }) {
  const [mobileOpen, setMobileOpen] = useState(false);

  return (
    <div className="min-h-screen flex flex-col bg-slate-50 font-sans text-slate-900">
      <header className="sticky top-0 z-50 bg-blue-700 shadow-md text-white">
        <div className="container flex items-center justify-between h-16 px-4 mx-auto max-w-5xl">
          <Link to="/" className="flex items-center gap-2">
            <AlertTriangle className="h-6 w-6 text-yellow-400" />
            <span className="font-bold text-xl tracking-tight">Flood Rescue Gen</span>
          </Link>

          <button onClick={() => setMobileOpen(!mobileOpen)} className="md:hidden p-2">
            {mobileOpen ? <X /> : <Menu />}
          </button>

          <nav className="hidden md:flex gap-6">
            {navItems.map((item) => (
              <Link key={item.to} to={item.to} className="text-sm font-medium hover:text-yellow-400 transition-colors">
                {item.label}
              </Link>
            ))}
          </nav>
        </div>

        {mobileOpen && (
          <nav className="md:hidden bg-blue-800 border-t border-blue-600 flex flex-col p-4 gap-4">
            {navItems.map((item) => (
              <Link key={item.to} to={item.to} onClick={() => setMobileOpen(false)} className="flex items-center gap-2 text-sm font-medium">
                <item.icon className="h-4 w-4" /> {item.label}
              </Link>
            ))}
          </nav>
        )}
      </header>

      <main className="flex-1 max-w-4xl mx-auto w-full p-4">{children}</main>

      <footer className="bg-slate-900 text-slate-400 text-center text-xs py-8">
        <p className="font-bold text-slate-200 mb-1">Flood Rescue Gen Â© 2026</p>
        <p>A Humanitarian Tech Initiative for Disaster Management</p>
      </footer>
    </div>
  );
}
